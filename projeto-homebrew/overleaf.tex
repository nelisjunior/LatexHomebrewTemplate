% Configurações específicas para compatibilidade com Overleaf
% Este arquivo é automaticamente carregado pelo main.tex
% As configurações básicas já estão ativas; as avançadas podem ser ativadas se necessário

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CONFIGURAÇÕES AUTOMÁTICAS DO OVERLEAF
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Este arquivo aplica automaticamente ajustes básicos de compatibilidade
% para o Overleaf. Configurações adicionais podem ser ativadas 
% descomentando as linhas apropriadas abaixo.
%
% As configurações básicas incluem:
% - Otimizações de memória leves
% - Ajustes para compilação mais rápida
% - Compatibilidade com fontes padrão
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% CONFIGURAÇÃO BÁSICA (JÁ ATIVA)
\usepackage{etoolbox}
\apptocmd{\tableofcontents}{\newpage}{}{}
\tikzset{every shadow/.style={opacity=0.7}}  % Reduz a opacidade das sombras para melhor desempenho

% Configuração para detecção automática de ambiente Overleaf
\newif\ifoverleaf
\overleaftrue  % Assume que estamos no Overleaf

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SEÇÃO 1: AJUSTES DE FONTES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Overleaf suporta estas fontes que são compatíveis com XeLaTeX
% Descomente apenas UMA das linhas abaixo se necessário

% \setmainfont{Times New Roman}
% \setmainfont{TeX Gyre Termes}
% \setmainfont{TeX Gyre Pagella}
% \setmainfont{Latin Modern Roman}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SEÇÃO 2: SIMPLIFICAÇÃO DE MAPAS MENTAIS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Para problemas com mapas mentais muito complexos, descomente as linhas abaixo:

% Opção 1: Desativar completamente os mapas mentais automáticos
% \renewcommand{\generatecomplexdocmap}{\textit{(Mapa mental desativado para compatibilidade com Overleaf)}}
% \renewcommand{\generateautodocmap}{\textit{(Mapa mental desativado para compatibilidade com Overleaf)}}

% Opção 2: Usar versão simplificada dos mapas mentais
% \def\usesimplifiedmindmap{1}

% CORREÇÃO PARA MAPAS MENTAIS QUEBRADOS EM XELATEX 2023+
% Esta seção corrige problemas de quebra de texto nos nós dos mapas mentais
\makeatletter
\newcommand{\fixnodebreaks}[1]{%
  \def\nodebreakfixer{#1}%
  \ifx\nodebreakfixer\@empty
    #1%
  \else
    \begin{minipage}{3.2cm}
      \centering\small#1
    \end{minipage}%
  \fi
}
\makeatother

% Redefine o estilo de conceito para XeLaTeX 2023+
\tikzset{
  concept/.append style={
    execute at begin node={\begin{varwidth}{3.5cm}\centering\small},
    execute at end node={\end{varwidth}}
  }
}

% Carrega o pacote varwidth se ainda não estiver carregado
\usepackage{varwidth}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SEÇÃO 3: OTIMIZAÇÕES DE MEMÓRIA
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Para problemas de memória no Overleaf:

% Reduzir a complexidade de elementos decorativos
% \tikzset{every shadow/.style={opacity=0}}
% \tikzset{concept connection/.append style={line width=0.5pt}}

% Reduzir resolução de cores
% \tikzset{every tcolourbox/.append style={color=black, natural}}

% Adicionar quebras de página extras para evitar seções grandes
% \usepackage{etoolbox}
% \apptocmd{\tableofcontents}{\newpage}{}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% FIM DAS CONFIGURAÇÕES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%